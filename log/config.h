/**
 * @file
 *
 * @brief Logging support for Network Simulation Frameworks.
 *
 * @version 1.0
 * @author  Fuzzier Tang <gauchyler@gmail.com>
 * @date    2015-02-26
 *
 * @copyright Copyright (c) 2015.
 *            National Key Laboratory of Science and Technology on Communications,
 *            University of Electronic Science and Technology of China.
 *            All rights reserved.
 */

#ifndef CONFIG_H__A5BE74BF_215D_493B_8BB1_8F90D9316F15
#define CONFIG_H__A5BE74BF_215D_493B_8BB1_8F90D9316F15


#include <nsfx/config.h>


////////////////////////////////////////////////////////////////////////////////
/**
 * @defgroup Log
 *
 * @brief Log support.
 *
 * To use the default logger, users simply use the following macros:
 * NSFX_LOG(severity)  << "a message";
 * NSFX_LOG_FATAL()    << "a message";
 * NSFX_LOG_ERROR()    << "a message";
 * NSFX_LOG_WARNING()  << "a message";
 * NSFX_LOG_INFO()     << "a message";
 * NSFX_LOG_DEBUG()    << "a message";
 * NSFX_LOG_FUNCTION() << "a message";
 * NSFX_LOG_TRACE()    << "a message";
 *
 * Users can also use a custom logger, and use the following macros:
 * NSFX_LOG(logger, severity) << "a message";
 * NSFX_LOG_FATAL(logger)     << "a message";
 * NSFX_LOG_ERROR(logger)     << "a message";
 * NSFX_LOG_WARNING(logger)   << "a message";
 * NSFX_LOG_INFO(logger)      << "a message";
 * NSFX_LOG_DEBUG(logger)     << "a message";
 * NSFX_LOG_FUNCTION(logger)  << "a message";
 * NSFX_LOG_TRACE(logger)     << "a message";
 *
 *
 * # Concept
 *   A <i>log source</i> generates runtime information, and feed them into
 *   <i>log sinks</i>.
 *
 *   Typical information includes human-readable message, severity level,
 *   timestamp, object name, function name, file name and line number, etc.
 *   The information is represented as a collection of <i>named values</i>.
 *
 *   A <i>log record</i> is a collection of named values.
 *   A log source generates log records, and passes them to log sinks.
 *   And the log sinks are responsible to process the log records,
 *   e.g., modify, forward, format, display or store the log records.
 *
 *   A log record may be passed along a series of log sinks.
 *   Each of the log sink performs certain operations upon the log record.
 *   In such perspective, each log sink in the chain is a log source that
 *   feeds log records to the log sinks after it.
 *   Therefore, there is essentially no difference between the log sources and
 *   sinks, and they are both called <i>loggers</i>.
 *
 *   The ultimate log source is the user program that generates the inital
 *   log record and feeds it into the chain.
 *   The piece of program where an initial log record is generated is called
 *   the <i>logging site</i>.
 *
 * # Core tools
 * ## Attribute value
 *    A log record holds named values.
 *    The values are held in a type-neutral way.
 *    Each value is an instance of the \c AttributeValue class.
 *    The class holds a pointer pointing to the \c IAttributeValue interface.
 *
 *    The \c IAttributeValue interfaces provides a single method
 *    \c IAttributeValue::GetTypeId() that gives the type of the stored value.
 *
 *    The \c ITypedAttributeValue interfaces extends the \c IAttributeValue
 *    interface, and provides a method \c ITypedAttributeValue::Get() that
 *    allows log sinks to query the stored value.
 *
 *    A concrete attribute class <b>must</b> implement \c ITypedAttributeValue
 *    interface.
 *
 *    Users that implement attribute value classes <b>must</b> make sure that
 *    the underlying value is kept available when log sinks access it.
 *    However, the log sources may not always know when the underlying value will
 *    be accessed by the log sinks.
 *    e.g., it is not a problem in a single-threaded environment, the logger will
 *    deliver log records to log sinks immediately and wait for them to complete.
 *    However, in a multithreaded environment, the log sinks may reside in a
 *    different thread and consumes the log records in a later time.
 *    Therefore, attribute value <b>shall</b> store or refer to persistent values
 *    whenever possible.
 *
 * ## Logger
 *    In order to process log records, a log sink often have to understand
 *    the meanings of the named values generated by the log source.
 *    Therefore, log sources and sinks are usually coupled, and agree upon
 *    the collection of named values in log records.
 *
 *    The names of values are decided at design-time for log sources and sinks,
 *    while values are usually generated by log sources at runtime.
 *
 *    The library provides \c ILog interface.
 *    It is defined as an event sink that provides a single method
 *    \c ILog::Fire() that accepts a log record.
 *
 *    An intermediate logger <b>shall</b> provide \c ILogEvent interface to
 *    chain/signal other loggers to further process log records.
 *    A terminal logger do not have to provide \c ILogEvent interface.
 *
 * ## Record
 *    Log records are passed to loggers as an \c std::shared_ptr.
 *    Thus, a logger can pass a single instance of log record to several
 *    loggers for further processing.
 *
 *    Since log records are shared among loggers, any modification to the log
 *    record is visible to all other logger.
 *    Thus, logger writters must be careful to make the order and content of
 *    the modifications consistent among the loggers, especially in a
 *    multithreaded logging system.
 *
 * # Utilities
 * ## Attribute
 *    It can be painful for users to provide common information at every
 *    logging site, such as timestamps, function names and line numbers, etc.
 *    To ease the coding burden of users, certain information should be
 *    generated automatically.
 *
 *    An \c Attribute can be used to generate attribute values automatically.
 *    It has a single method \c Attribute::GetValue() that returns an instance
 *    of \c AttributeValue.
 *
 *    A logger can provide \c IAttributeCollection interface to allow users
 *    add, remove or clear \c IAttribute.
 *
 * ## Filter
 *    A log filter examines the named values in a log record, and makes
 *    a decision whether the log record should be discarded.
 *
 *    A filter implements \c IFilter interface.
 *
 * ## Formatter
 */


////////////////////////////////////////////////////////////////////////////////
#define NSFX_LOG_OPEN_NAMESPACE     \
    NSFX_OPEN_NAMESPACE             \
    namespace log {

#define NSFX_LOG_CLOSE_NAMESPACE    \
    } /* namespace log */           \
    NSFX_CLOSE_NAMESPACE


#endif // CONFIG_H__A5BE74BF_215D_493B_8BB1_8F90D9316F15

